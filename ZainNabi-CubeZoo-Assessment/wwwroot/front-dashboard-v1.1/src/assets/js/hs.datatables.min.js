/*
* Custombox wrapper
* @Datatables: 2.0.0 (Mon, 25 Nov 2019)
* @requires: jQuery v3.0 or later, DataTables v1.10.20
* @author: HtmlStream
* @event-namespace: .HSCore.components.HSDatatables
* @license: Htmlstream Libraries (https://htmlstream.com/licenses)
* Copyright 2020 Htmlstream
*/
(function(n){"use strict";n.HSCore.components.HSDatatables={defaults:{paging:!0,info:{currentInterval:null,totalQty:null,divider:" to "},isSelectable:!1,isColumnsSearch:!1,isColumnsSearchTheadAfter:!1,pagination:null,paginationClasses:"pagination datatable-custom-pagination",paginationLinksClasses:"page-link",paginationItemsClasses:"page-item",paginationPrevClasses:"page-item",paginationPrevLinkClasses:"page-link",paginationPrevLinkMarkup:'<span aria-hidden="true">Prev<\/span>',paginationNextClasses:"page-item",paginationNextLinkClasses:"page-link",paginationNextLinkMarkup:'<span aria-hidden="true">Next<\/span>',detailsInvoker:null,select:null},init:function(t,i){if(t.length){var u=this,s=Object.assign({},u.defaults),h=t.attr("data-hs-datatables-options")?JSON.parse(t.attr("data-hs-datatables-options")):{},r={};r=n.extend(s,r,h,i);var f=t.DataTable(r),e=new n.fn.dataTable.Api(t),o=function(){var o=e.page.info(),f=n("#"+e.context[0].nTable.id+"_paginate"),i=f.find(".paginate_button.previous"),u=f.find(".paginate_button.next"),s=f.find(".paginate_button:not(.previous):not(.next), .ellipsis");i.wrap('<span class="'+r.paginationItemsClasses+'"><\/span>');i.addClass(r.paginationPrevLinkClasses).html(r.paginationPrevLinkMarkup);u.wrap('<span class="'+r.paginationItemsClasses+'"><\/span>');u.addClass(r.paginationNextLinkClasses).html(r.paginationNextLinkMarkup);i.unwrap(i.parent()).wrap('<li class="paginate_item '+r.paginationItemsClasses+'"><\/li>');i.hasClass("disabled")&&(i.removeClass("disabled"),i.parent().addClass("disabled"));u.unwrap(u.parent()).wrap('<li class="paginate_item '+r.paginationItemsClasses+'"><\/li>');u.hasClass("disabled")&&(u.removeClass("disabled"),u.parent().addClass("disabled"));s.unwrap(s.parent());s.each(function(){n(this).hasClass("current")?(n(this).removeClass("current"),n(this).wrap('<li class="paginate_item '+r.paginationItemsClasses+' active"><\/li>')):n(this).wrap('<li class="paginate_item '+r.paginationItemsClasses+'"><\/li>')});s.addClass(r.paginationLinksClasses);f.prepend('<ul id="'+e.context[0].nTable.id+'_pagination" class="'+r.paginationClasses+'"><\/ul>');f.find(".paginate_item").appendTo("#"+e.context[0].nTable.id+"_pagination");o.pages<=1?n("#"+r.pagination).hide():n("#"+r.pagination).show();r.info.currentInterval&&n(r.info.currentInterval).html(o.start+1+r.info.divider+o.end);r.info.totalQty&&n(r.info.totalQty).html(o.recordsDisplay);r.scrollY&&t.find(n(".dataTables_scrollBody thead tr")).css({visibility:"hidden"})};o();f.on("draw",o);return u.customPagination(t,f,r),u.customSearch(t,f,r),r.isColumnsSearch&&u.customColumnsSearch(t,f,r),u.customEntries(t,f,r),r.isSelectable&&u.rowChecking(t),u.details(t,r.detailsInvoker,f),r.select&&u.select(r.select,f),f}},customPagination:function(t,i,r){var u=r;n("#"+u.pagination).append(n("#"+i.context[0].nTable.id+"_paginate"))},customSearch:function(t,i,r){var u=r;n(u.search).on("keyup",function(){i.search(this.value).draw()})},customColumnsSearch:function(t,i,r){var u=r;i.columns().every(function(){var t=this;u.isColumnsSearchTheadAfter&&n(".dataTables_scrollFoot").insertAfter(".dataTables_scrollHead");n("input",this.footer()).on("keyup change",function(){t.search()!==this.value&&t.search(this.value).draw()});n("select",this.footer()).on("change",function(){t.search()!==this.value&&t.search(this.value).draw()})})},customEntries:function(t,i,r){var u=r;n(u.entries).on("change",function(){var t=n(this).val();i.page.len(t).draw()})},rowChecking:function(t){n(t).on("change","input",function(){n(this).parents("tr").toggleClass("checked")})},format:function(n){return n},details:function(t,i,r){if(i){var u=this;n(t).on("click",i,function(){var t=n(this).closest("tr"),i=r.row(t);i.child.isShown()?(i.child.hide(),t.removeClass("opened")):(i.child(u.format(t.data("details"))).show(),t.addClass("opened"))})}},select:function(t,i){n(t.classMap.checkAll).on("click",function(){n(this).is(":checked")?(i.rows().select(),i.rows().nodes().each(function(i){n(i).find(t.selector).prop("checked",!0)})):(i.rows().deselect(),i.rows().nodes().each(function(i){n(i).find(t.selector).prop("checked",!1)}))});i.on("select",function(){n(t.classMap.counter).text(i.rows(".selected").data().length);i.rows().data().length!==i.rows(".selected").data().length?n(t.classMap.checkAll).prop("checked",!1):n(t.classMap.checkAll).prop("checked",!0);i.rows(".selected").data().length===0?n(t.classMap.counterInfo).hide():n(t.classMap.counterInfo).show()}).on("deselect",function(){n(t.classMap.counter).text(i.rows(".selected").data().length);i.rows().data().length!==i.rows(".selected").data().length?n(t.classMap.checkAll).prop("checked",!1):n(t.classMap.checkAll).prop("checked",!0);i.rows(".selected").data().length===0?n(t.classMap.counterInfo).hide():n(t.classMap.counterInfo).show()})}}})(jQuery);